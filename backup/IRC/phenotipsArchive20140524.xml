<?xml version='1.0' encoding='UTF-8'?>
<xwikidoc version="1.1">
  <web>IRC</web>
  <name>phenotipsArchive20140524</name>
  <language />
  <defaultLanguage />
  <translation>0</translation>
  <creator>XWiki.sdumitriu</creator>
  <creationDate>1400909931000</creationDate>
  <parent>IRC.WebHome</parent>
  <author>XWiki.sdumitriu</author>
  <contentAuthor>XWiki.sdumitriu</contentAuthor>
  <date>1400971243000</date>
  <contentUpdateDate>1400971243000</contentUpdateDate>
  <version>1.74</version>
  <title>IRC Archive for channel #phenotips on 24 May 2014</title>
  <comment>Logging from IRC</comment>
  <minorEdit>true</minorEdit>
  <syntaxId>plain/1.0</syntaxId>
  <hidden>false</hidden>
  <content>&lt;sdumitriu1> has quit
07:14 &lt;sdumitriu1> has joined #phenotips
11:32 &lt;akats> has joined #phenotips
12:06 &lt;sdumitriu1> akats: There's a bug with https://github.com/phenotips/phenotips/pull/919
12:07 &lt;sdumitriu1> Every phenotype selected appears under the "Connective tissue" category
12:07 &lt;sdumitriu1> Evern those that are in the predefined mapping
12:27 &lt;akats> I see. I'll get on that
12:28 &lt;akats> I have a question. I've added some data into PhenoTipsPatient when working on JSON export. https://github.com/phenotips/phenotips/pull/875
12:28 &lt;akats> Would it be a bad idea to merge that branch into the Excel export branch?
12:28 &lt;sdumitriu1> No
12:29 &lt;sdumitriu1> I was going to look at this very soon
12:29 &lt;sdumitriu1> So it's OK
12:30 &lt;akats> and by every phenotype you don't mean every single phenotype available in the database, do you?
12:31 &lt;sdumitriu1> Oh, no
12:31 &lt;sdumitriu1> When you select one
12:31 &lt;sdumitriu1> Instead of being added in the right category, it's added in the last one
12:32 &lt;sdumitriu1> Just committed something useful for you
12:32 &lt;akats> I was about to ask, wow better debugging support!
12:32 &lt;sdumitriu1> pull, "mvn compile" in distribution/war, copy target/classes/com/xpn/xwiki/plugin/skinx/*class into webapps/phenotips/WEB-INF/classes/....
12:33 &lt;sdumitriu1> Restart jetty
12:33 &lt;sdumitriu1> Append ?minify=false in the URL
12:33 &lt;sdumitriu1> All the JSX scripts should now be expanded
12:33 &lt;akats> Sweet. Thank you!
12:35 &lt;sdumitriu1> And instead of the one large xwiki-min.js, you'll get all the individual scripts (prototype.js, xwiki.js, suggest.js...)
12:36 &lt;sdumitriu1> But they'll still be compressed, so you can copy them from the xwiki-platform sources over
12:37 &lt;akats> Gotcha. By the way the bug is only present when you're adding phenotypes from the search, or have you spotted it in other places?
12:38 &lt;sdumitriu1> Only search
12:39 &lt;sdumitriu1> And only the global search
12:39 &lt;sdumitriu1> When I search from a subcategory, it works correctly
12:40 &lt;sdumitriu1> I don't know if the bug comes from your code, or it just exposed a pre-existing bug in the quick search
12:41 &lt;akats> I'm taking a look
13:33 &lt;akats> So far, what I'm seeing is that for example looking up Autsim in the search and selecting it, causes it to end up in the Connective tissue section where you select phenotypes (not the summary)
13:35 &lt;sdumitriu1> It does in the summary for me
13:38 &lt;akats> It does, but as far as I understand it appears in the summary under connective tissue because it is registered in the full list under connective tissue for some reason
14:16 &lt;sdumitriu1> https://github.com/antonkatz/phenotips-1/tree/issue-770
14:16 &lt;sdumitriu1> https://github.com/antonkatz/phenotips-1/tree/issue-578
14:36 &lt;akats> Ok. Thanks. I'll delete them soon
15:00 &lt;akats> I think I found the bug. But now that I'm thinking about it, it should in theory have been spotted already
15:01 &lt;sdumitriu1> As I said, it could be a pre-existing problem
15:01 &lt;akats> What happen is that then you select a phenotype from the search it is "considered" to be from the last category, which used to be Other
15:01 &lt;akats> But now it is Connective tissue
15:02 &lt;akats> But I haven't spotted things from the search ending up in the other category if they could go to a different category
16:02 &lt;sdumitriu1> akats: Did you get to the bottom of it?
16:02 &lt;akats> No. Not yet
16:02 &lt;akats> But it definitely has to do something with my code
16:02 &lt;akats> But no solid idea of where
16:03 &lt;akats> It works on the playground
16:03 &lt;akats> And bringing back the "other" section did not help
16:08 &lt;sdumitriu1> Did you change the markup? Any id or name attributes?
16:10 &lt;akats> No
16:18 &lt;akats> But it does have something to do with the "other" section
17:12 &lt;akats> Wow. This bug is just amazing. :) I'm basking in its glory. The second I think I'm getting closer... it shows me just how much I know.
17:16 &lt;sdumitriu1> :D
17:16 &lt;sdumitriu1> Let me know if you want me to look
17:20 &lt;akats> thanks
17:21 &lt;sdumitriu1> Do you?
17:29 &lt;akats> Well, not really
17:29 &lt;akats> But I might
17:29 &lt;akats> I found the place (90% sure)
17:29 &lt;akats> It's in this function
17:29 &lt;akats> https://github.com/phenotips/phenotips/blob/a8dcc885d01e0a98f8c6764e54e25e975479822d/components/patient-data/ui/src/main/resources/PhenoTips/PatientSheetCode.xml#L144
17:30 &lt;akats> The reason that the bug happen is because my code adds top sections and then just hides them
17:30 &lt;akats> BUT the prenatal phenotypes also use my code
17:30 &lt;akats> They also have all those categories defined, just hidden
17:31 &lt;akats> And this bugger "Â var matchingCategory = document.documentElement.down(selector);" selects the first thing in site
17:31 &lt;akats> and it ends up being in the prenatal phenotypes section rather than the regular phenotype section
17:32 &lt;akats> sight*
17:41 &lt;akats> It's a two line fix, but I don't have the time to fix it and commit it today. I'll do it monday.
17:41 &lt;akats> Have a good weekend
17:42 &lt;akats> has quit
18:40 &lt;vijay13> has quit</content>
  <object>
    <name>IRC.phenotipsArchive20140524</name>
    <number>0</number>
    <className>IRC.IRCBotArchiveClass</className>
    <guid>4d7a7691-8878-4831-b5bd-10801dd2c684</guid>
    <class>
      <name>IRC.IRCBotArchiveClass</name>
      <customClass />
      <customMapping />
      <defaultViewSheet />
      <defaultEditSheet />
      <defaultWeb />
      <nameField />
      <validationScript />
      <channel>
        <customDisplay />
        <disabled>0</disabled>
        <name>channel</name>
        <number>1</number>
        <picker>0</picker>
        <prettyName>Channel</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <validationMessage />
        <validationRegExp />
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </channel>
    </class>
    <property>
      <channel>phenotips</channel>
    </property>
  </object>
</xwikidoc>